>[Slipp 스터디](https://www.slipp.net/wiki/pages/viewpage.action?pageId=52527461)에서 책을 읽으며 정리  
참고한 책 : [마이크로 서비스 패턴](https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=228694618)

## 1. 모놀리식 지옥에서 벗어나라

### 1.1 마이크로 서비스 아키텍처란?

- 확장 큐브(3차원 확장 모델)에 따른 마이크로 서비스 아키텍처  
    - 다중 인스턴스에 요청을 고루 분산 -> 가용성 개선
    - 요청의 속성별 라우팅 (유저의 Id를 보고 인스턴스 선택) -> 트랜잭션 및 데이터 볼륨 처리에 유용
    - 기능에 따라 애플리케이션을 서비스로 분해 -> 복잡도 감소

- 특징
    - 서비스의 모듈화(느슨한 결합으로 API 통신)
    - 서비스 마다 가지는 자체 DB
    - 자체 도메인 모델 소유
    - Message Brocker, REST, gRCP 같은 가벼운 프로토콜 기반 
        

### 1.2 장점과 단점

- 장점
    - 서비스가 작아 관리에 용이
    - 독립적인 배포/확장
    - 결함 격리가 잘된다
    - 신기술 시험/독립이 쉽다

- 단점
    - MSA에 잘맞는 서비스로 분해/개발하기 힘들다
    - 운영에 복잡도가 있다(지연시간, 부분실패 처리, 관리해야할 인스턴스 증가)
    - 여러 서비스에 걸린 공통기능 배포 시 세심한 조율이 필요하다
    - 도입 시기를 결정하기 힘들다
    
### 1.3 마이크로 서비스 패턴

- 애플리케이션을 여러 서비스로 분해하는 패턴(비즈니스, 도메인)
- 통신 패턴(통신 스타일, 디스커버리, 신뢰성, 트랜잭셔널 메시징, 외부 API)
- 트랜잭션 관리를 위한 데이터 일관성 패턴(사가 패턴)
- 서비스 별 DB 환경에서 데이터 쿼리 패턴(API 조합, CQRS)
- 서비스 배포 패턴(호스트별 단일 서비스, 컨테이너 별 서비스, 서버리스 배포, ...)
- 관측성 패턴(헬스 체크, 로그 수집, 분산 추적, 예외 추적, 애플리케이션 지표, 감사 로깅)
- 서비스 테스트 자동화 패턴(컨슈머 주도 계약 테스트, 컨슈머 쪽 계약 테스트, 서비스 컴포넌트 테스트)
- 횡단 관심사 처리 패턴(마이크로 서비스 섀시 패턴)
- 보안 패턴(액세스 토큰 패턴)

### 1.4 프로세스와 조직

마이크로 서비스는 작은 개발조직 단위로 애자일한 개발 프로세스를 진행할 때 효율적이다.
인원이 많아질 수록 소통의 오버헤드가 커지고 장점을 살릴 수 없기 때문이다. 조직을 작게 만들어 소통에 들어가는 비용을 줄이고
작은 단위의 애자일한 개발을 위해 지속적인 전달/배포를 할 수 있는 환경이 필요하다.